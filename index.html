<!DOCTYPE html>
<html lang="en" class="">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Excel Downloader</title>
        <script src="https://cdn.tailwindcss.com"></script>
        <script>
            tailwind.config = {
                darkMode: "class",
                theme: {
                    extend: {
                        spacing: {
                            18: "4.5rem",
                        },
                        colors: {
                            border: "hsl(var(--border))",
                            input: "hsl(var(--input))",
                            ring: "hsl(var(--ring))",
                            background: "hsl(var(--background))",
                            foreground: "hsl(var(--foreground))",
                            primary: {
                                DEFAULT: "hsl(var(--primary))",
                                foreground: "hsl(var(--primary-foreground))",
                            },
                            secondary: {
                                DEFAULT: "hsl(var(--secondary))",
                                foreground: "hsl(var(--secondary-foreground))",
                            },
                            destructive: {
                                DEFAULT: "hsl(var(--destructive))",
                                foreground:
                                    "hsl(var(--destructive-foreground))",
                            },
                            muted: {
                                DEFAULT: "hsl(var(--muted))",
                                foreground: "hsl(var(--muted-foreground))",
                            },
                            accent: {
                                DEFAULT: "hsl(var(--accent))",
                                foreground: "hsl(var(--accent-foreground))",
                            },
                            popover: {
                                DEFAULT: "hsl(var(--popover))",
                                foreground: "hsl(var(--popover-foreground))",
                            },
                            card: {
                                DEFAULT: "hsl(var(--card))",
                                foreground: "hsl(var(--card-foreground))",
                            },
                        },
                    },
                },
            };
        </script>
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        />
        <style>
            :root {
                --background: 0 0% 100%;
                --foreground: 222.2 84% 4.9%;
                --card: 0 0% 100%;
                --card-foreground: 222.2 84% 4.9%;
                --popover: 0 0% 100%;
                --popover-foreground: 222.2 84% 4.9%;
                --primary: 222.2 47.4% 11.2%;
                --primary-foreground: 210 40% 98%;
                --secondary: 210 40% 96.1%;
                --secondary-foreground: 222.2 47.4% 11.2%;
                --muted: 210 40% 96.1%;
                --muted-foreground: 215.4 16.3% 46.9%;
                --accent: 210 40% 96.1%;
                --accent-foreground: 222.2 47.4% 11.2%;
                --destructive: 0 84.2% 60.2%;
                --destructive-foreground: 210 40% 98%;
                --border: 214.3 31.8% 91.4%;
                --input: 214.3 31.8% 91.4%;
                --ring: 222.2 84% 4.9%;
                --radius: 0.5rem;
            }

            .dark {
                --background: 222.2 84% 4.9%;
                --foreground: 210 40% 98%;
                --card: 222.2 84% 4.9%;
                --card-foreground: 210 40% 98%;
                --popover: 222.2 84% 4.9%;
                --popover-foreground: 210 40% 98%;
                --primary: 210 40% 98%;
                --primary-foreground: 222.2 47.4% 11.2%;
                --secondary: 217.2 32.6% 17.5%;
                --secondary-foreground: 210 40% 98%;
                --muted: 217.2 32.6% 17.5%;
                --muted-foreground: 215 20.2% 65.1%;
                --accent: 217.2 32.6% 17.5%;
                --accent-foreground: 210 40% 98%;
                --destructive: 0 100% 60%;
                --destructive-foreground: 210 40% 98%;
                --border: 217.2 32.6% 17.5%;
                --input: 217.2 32.6% 17.5%;
                --ring: 212.7 26.8% 83.9%;
            }

            #particles-js {
                position: absolute;
                width: 100%;
                height: 100%;
                z-index: -1;
            }
        </style>
        <link rel="stylesheet" href="style.css" />
    </head>
    <body
        class="bg-background text-foreground transition-colors duration-300 ease-in-out"
    >
        <div id="particles-js"></div>

        <!-- Header -->
        <header
            class="fixed top-0 left-0 right-0 z-10 flex h-16 items-center justify-between border-b border-border bg-background/80 px-4 backdrop-blur-sm md:px-6"
        >
            <h1 class="text-xl font-semibold">Excel Downloader</h1>
            <div class="flex items-center gap-4">
                <!-- User Profile Placeholder -->
                <div id="user-profile" class="hidden items-center gap-2">
                    <div>
                        <div class="flex items-center justify-center gap-2">
                            <div
                                class="relative flex h-10 w-10 cursor-pointer items-center justify-center rounded-full bg-primary text-primary-foreground"
                            >
                                <span
                                    id="user-initials"
                                    class="text-sm font-bold"
                                    >AU</span
                                >
                            </div>
                            <span
                                class="hidden cursor-pointer text-sm font-medium md:inline"
                                id="hello-user"
                                >Hello, <span id="username">User</span>
                            </span>
                        </div>

                        <!-- Dropdown -->
                        <div
                            id="logout-dropdown"
                            class="absolute top-16 right-18 hidden w-48 rounded-md border border-border bg-card p-1"
                        >
                            <button
                                id="logout-button"
                                class="flex w-full items-center gap-2 rounded-sm px-2 py-1.5 text-sm text-destructive hover:bg-destructive hover:text-destructive-foreground font-bold"
                            >
                                <i
                                    class="fa-solid fa-arrow-right-from-bracket"
                                ></i>
                                Logout
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Theme Toggle Button -->
                <button
                    id="theme-toggle"
                    class="flex h-10 w-10 items-center justify-center rounded-full border border-border text-lg"
                >
                    <i class="fa-solid fa-sun" id="theme-icon-light"></i>
                    <i class="fa-solid fa-moon hidden" id="theme-icon-dark"></i>
                </button>
            </div>
        </header>

        <!-- Main Content -->
        <main
            class="container mx-auto flex min-h-screen items-center justify-center px-4"
        >
            <div
                class="w-full max-w-2xl rounded-xl border border-border bg-card/80 p-6 shadow-sm backdrop-blur-sm md:p-8"
            >
                <div class="text-center">
                    <h2 class="text-2xl font-bold tracking-tight">
                        API Excel Downloader
                    </h2>
                    <p class="mt-2 text-muted-foreground">
                        Enter an API URL to download the Excel file.
                    </p>
                </div>

                <form id="downloadForm" class="mt-8 space-y-4">
                    <div>
                        <label
                            for="apiUrl"
                            class="text-sm font-medium text-foreground"
                            >API URL</label
                        >
                        <input
                            type="url"
                            id="apiUrl"
                            list="url-history"
                            class="mt-1 block w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring"
                            placeholder="https://api.example.com/v1/export"
                            value=""
                            required
                        />
                        <datalist id="url-history"></datalist>
                    </div>

                    <div class="relative">
                        <label
                            for="httpMethod"
                            class="text-sm font-medium text-foreground"
                            >HTTP Method</label
                        >
                        <select
                            id="httpMethod"
                            class="mt-1 block w-full appearance-none rounded-md border border-input bg-transparent px-3 py-2 text-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring"
                        >
                            <option value="" default selected disabled>
                                -- Please Select HTTP Method
                            </option>
                            <option value="GET">GET</option>
                            <option value="POST">POST</option>
                        </select>
                        <div
                            class="pointer-events-none absolute inset-y-0 right-0 top-6 flex items-center px-2 text-foreground"
                        >
                            <i class="fa-solid fa-chevron-down text-xs"></i>
                        </div>
                    </div>

                    <button
                        type="submit"
                        id="downloadButton"
                        class="w-full rounded-md border border-input bg-transparent py-2 font-semibold text-foreground shadow-sm hover:bg-accent hover:text-accent-foreground"
                    >
                        Download
                    </button>
                </form>

                <!-- Progress Bar -->
                <div id="progressBarContainer" class="mt-6 hidden">
                    <div
                        class="h-4 w-full overflow-hidden rounded-full bg-secondary"
                    >
                        <div
                            id="downloadProgressBar"
                            class="progress-bar-animated h-full rounded-full bg-primary transition-all duration-300"
                            style="width: 0%"
                        ></div>
                    </div>
                    <p
                        id="progressText"
                        class="mt-2 text-center text-sm text-muted-foreground"
                    >
                        Starting download...
                    </p>
                </div>
            </div>
        </main>

        <!-- Login Modal -->
        <div
            id="login-modal-backdrop"
            class="fixed inset-0 z-40 hidden bg-background/80 backdrop-blur-sm"
        ></div>
        <div
            id="login-modal"
            class="fixed inset-0 z-50 hidden w-full max-w-sm transform-gpu transition-all scale-95 opacity-0 top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"
        >
            <div
                class="rounded-xl border border-border bg-card text-card-foreground shadow-lg"
            >
                <div class="flex flex-col space-y-1.5 p-6">
                    <h3 class="font-semibold tracking-tight text-2xl">
                        Authentication Required
                    </h3>
                    <p class="text-sm text-muted-foreground">
                        Please log in to continue.
                    </p>
                </div>
                <form id="loginForm" class="p-6 pt-0">
                    <div class="space-y-4">
                        <div class="space-y-2">
                            <label for="email" class="text-sm font-medium"
                                >Email</label
                            >
                            <input
                                type="email"
                                id="email"
                                placeholder="john.doe@example.com"
                                required
                                class="block w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring"
                            />
                        </div>
                        <div class="space-y-2">
                            <label for="password" class="text-sm font-medium"
                                >Password</label
                            >
                            <input
                                type="password"
                                id="password"
                                required
                                class="block w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring"
                            />
                        </div>
                    </div>
                    <div class="flex items-center mt-4 justify-end">
                        <button
                            type="submit"
                            class="w-full rounded-md border border-input bg-transparent py-2 font-semibold text-foreground shadow-sm hover:bg-accent hover:text-accent-foreground"
                        >
                            Login
                        </button>
                    </div>
                </form>
                <button
                    id="close-login-modal"
                    class="absolute top-4 right-4 text-muted-foreground hover:text-foreground"
                >
                    <i class="fa-solid fa-times"></i>
                </button>
            </div>
        </div>

        <!-- Toast Notifications Container -->
        <div
            id="toast-container"
            class="fixed bottom-4 right-4 z-50 w-full max-w-sm space-y-3"
        >
            <!-- Toasts will be dynamically inserted here -->
        </div>

        <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
        <script src="ui.js"></script>
        <script src="script.js"></script>
    </body>
</html>
